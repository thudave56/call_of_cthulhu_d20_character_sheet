/*
  Basic styling for the Call of Cthulhu d20 character sheet.
  The layout uses simple CSS grid for responsiveness. Colours
  and spacing are kept neutral to avoid distracting from the
  character data.
*/

body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #f5f5f5;
  color: #333;
}

header {
  background-color: #22334a;
  color: #fff;
  padding: 1rem;
  text-align: center;
}

header h1 {
  margin: 0;
  font-size: 1.8rem;
}

header .subtitle {
  font-size: 0.95rem;
  margin-top: 0.25rem;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

section.section {
  background-color: #fff;
  margin: 1rem auto;
  padding: 1rem;
  max-width: 1000px;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

section.section h2 {
  margin-top: 0;
  color: #22334a;
  border-bottom: 2px solid #22334a;
  padding-bottom: 0.3rem;
}

/* Grid layouts */
.grid.two-col {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
}

.grid.three-col {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

/* Form groups */
.form-group {
  display: flex;
  flex-direction: column;
  margin-bottom: 0.5rem;
}

.form-group label {
  font-weight: bold;
  margin-bottom: 0.25rem;
}

.form-group input,
.form-group select {
  padding: 0.3rem;
  border: 1px solid #bbb;
  border-radius: 3px;
  font-size: 0.9rem;
}

.form-group.small label {
  font-size: 0.85rem;
}

.form-group.small input {
  font-size: 0.85rem;
  width: 100%;
}

/* Checkbox group */
.checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem 1rem;
}

.checkbox-group label {
  display: flex;
  align-items: center;
  font-size: 0.9rem;
  cursor: pointer;
}

.checkbox-group input {
  margin-right: 0.3rem;
}

/* Tables */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 0.5rem;
  font-size: 0.85rem;
}

th,
td {
  border: 1px solid #ccc;
  padding: 0.4rem;
  text-align: left;
}

th {
  background-color: #e8eef5;
  font-weight: bold;
}

tr.profession-skill td {
  background-color: #f9f5e9;
}

/* Derived stats group */
.derived-group h3 {
  margin-top: 0;
  margin-bottom: 0.3rem;
  font-size: 1rem;
  color: #22334a;
}

.derived-group p,
.derived-group label {
  font-size: 0.85rem;
  margin: 0.3rem 0;
}

/* Button group */
.button-group {
  margin-bottom: 0.5rem;
}

.button-group button {
  background-color: #22334a;
  color: #fff;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-right: 0.5rem;
  font-size: 0.9rem;
}

.button-group button:hover {
  background-color: #334f72;
}

footer {
  text-align: center;
  font-size: 0.8rem;
  padding: 1rem;
  color: #555;
  max-width: 1000px;
  margin: 0 auto;
}

/* ===== MODE TOGGLE ===== */
.mode-toggle {
  margin-top: 1rem;
  display: flex;
  justify-content: center;
  gap: 0.5rem;
}

.mode-btn {
  background-color: #445566;
  color: #fff;
  padding: 0.5rem 1.5rem;
  border: 2px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.95rem;
  transition: all 0.3s ease;
}

.mode-btn:hover {
  background-color: #556677;
}

.mode-btn.active {
  background-color: #fff;
  color: #22334a;
  border-color: #fff;
  font-weight: bold;
}

/* ===== MODE-SPECIFIC DISPLAY ===== */
.creation-only {
  display: block;
}

.gameplay-only {
  display: none;
}

body.gameplay-mode .creation-only {
  display: none;
}

body.gameplay-mode .gameplay-only {
  display: block;
}

/* ===== GAME SESSION PANEL ===== */
#game-session-panel {
  background: linear-gradient(135deg, #22334a 0%, #2a4060 100%);
  color: #fff;
  border: 3px solid #1a2532;
}

#game-session-panel h2 {
  color: #fff;
  border-bottom-color: #fff;
  margin-bottom: 1rem;
}

.session-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
  margin-bottom: 1.5rem;
}

.vitals-group,
.combat-stats-group {
  background-color: rgba(255, 255, 255, 0.1);
  padding: 1rem;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.vitals-group h3,
.combat-stats-group h3 {
  margin: 0 0 0.75rem 0;
  color: #fff;
  font-size: 1.1rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
  padding-bottom: 0.5rem;
}

/* Vital Display */
.vital-display {
  margin-bottom: 1rem;
}

.vital-numbers {
  font-size: 2rem;
  font-weight: bold;
  text-align: center;
  margin-bottom: 0.5rem;
}

.vital-current {
  color: #4caf50;
}

.vital-current.warning {
  color: #ffc107;
}

.vital-current.danger {
  color: #f44336;
}

.vital-separator {
  color: #ccc;
  margin: 0 0.25rem;
}

.vital-max {
  color: #ccc;
}

/* Vital Bars */
.vital-bar-container {
  width: 100%;
  height: 24px;
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 12px;
  overflow: hidden;
  border: 2px solid rgba(255, 255, 255, 0.2);
  margin-bottom: 0.5rem;
}

.vital-bar {
  height: 100%;
  transition: all 0.3s ease;
  background: linear-gradient(90deg, #4caf50 0%, #66bb6a 100%);
  border-radius: 10px;
}

.vital-bar.warning {
  background: linear-gradient(90deg, #ffc107 0%, #ffb300 100%);
}

.vital-bar.danger {
  background: linear-gradient(90deg, #f44336 0%, #e53935 100%);
}

.vital-bar.sanity {
  background: linear-gradient(90deg, #2196f3 0%, #42a5f5 100%);
}

.vital-bar.sanity.warning {
  background: linear-gradient(90deg, #ff9800 0%, #fb8c00 100%);
}

.vital-bar.sanity.danger {
  background: linear-gradient(90deg, #9c27b0 0%, #8e24aa 100%);
}

.vital-percentage {
  text-align: center;
  font-size: 0.85rem;
  color: #ccc;
}

/* Sanity Threshold */
.sanity-threshold {
  text-align: center;
  font-size: 0.9rem;
  margin-bottom: 0.75rem;
  padding: 0.5rem;
  background-color: rgba(156, 39, 176, 0.2);
  border-radius: 4px;
  border: 1px solid rgba(156, 39, 176, 0.4);
}

.sanity-threshold.below-threshold {
  background-color: rgba(244, 67, 54, 0.3);
  border-color: rgba(244, 67, 54, 0.6);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Quick Modify Controls */
.quick-modify {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  flex-wrap: wrap;
}

.quick-modify label {
  font-size: 0.85rem;
  flex: 0 0 100%;
  margin-bottom: 0.25rem;
}

.quick-modify input {
  flex: 1;
  min-width: 60px;
  padding: 0.4rem;
  border: 1px solid #ccc;
  border-radius: 3px;
  font-size: 0.9rem;
}

.quick-btn {
  padding: 0.4rem 0.8rem;
  background-color: #f44336;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: bold;
  transition: background-color 0.2s;
}

.quick-btn:hover {
  background-color: #d32f2f;
}

.quick-btn.heal {
  background-color: #4caf50;
}

.quick-btn.heal:hover {
  background-color: #388e3c;
}

/* Combat Stats */
.stat-line {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.stat-line:last-child {
  border-bottom: none;
}

.stat-label {
  font-size: 0.9rem;
  color: #ddd;
}

.stat-value {
  font-size: 1.2rem;
  font-weight: bold;
  color: #4caf50;
}

.stat-detail {
  font-size: 0.75rem;
  color: #aaa;
  margin-left: 0.5rem;
}

.saves-display {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  justify-content: space-around;
}

.save-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.save-label {
  font-size: 0.75rem;
  color: #ccc;
  text-transform: uppercase;
}

.save-value {
  font-size: 1.3rem;
  font-weight: bold;
  color: #fff;
}

/* Session Notes */
.session-notes {
  margin-top: 1rem;
}

.session-notes h3 {
  margin: 0 0 0.5rem 0;
  color: #fff;
  font-size: 1rem;
}

.session-notes textarea {
  width: 100%;
  min-height: 80px;
  padding: 0.5rem;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  background-color: rgba(255, 255, 255, 0.95);
  color: #333;
  font-size: 0.9rem;
  font-family: Arial, sans-serif;
  resize: vertical;
}

/* ===== SKILLS CONTROLS ===== */
.skills-controls {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

#skillSearch {
  flex: 1;
  min-width: 200px;
  padding: 0.5rem;
  border: 2px solid #22334a;
  border-radius: 4px;
  font-size: 0.9rem;
}

.filter-btn {
  padding: 0.5rem 1rem;
  background-color: #e8eef5;
  color: #22334a;
  border: 2px solid #22334a;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.filter-btn:hover {
  background-color: #d0dce8;
}

.filter-btn.active {
  background-color: #22334a;
  color: #fff;
  font-weight: bold;
}

/* ===== GAMEPLAY MODE OPTIMIZATIONS ===== */
body.gameplay-mode .abilities-table th:nth-child(2),
body.gameplay-mode .abilities-table td:nth-child(2) {
  display: none;
}

body.gameplay-mode .skills-table th:nth-child(2),
body.gameplay-mode .skills-table th:nth-child(3),
body.gameplay-mode .skills-table th:nth-child(4),
body.gameplay-mode .skills-table td:nth-child(2),
body.gameplay-mode .skills-table td:nth-child(3),
body.gameplay-mode .skills-table td:nth-child(4) {
  display: none;
}

body.gameplay-mode .skills-table {
  font-size: 0.95rem;
}

body.gameplay-mode .skill-total {
  font-size: 1.1rem;
  font-weight: bold;
}

body.gameplay-mode #profession-info {
  display: none;
}

body.gameplay-mode #feats-section > p {
  display: none;
}

body.gameplay-mode #featsContainer {
  max-height: 100px;
  overflow-y: auto;
}

/* ===== SELECTED FEATS SUMMARY ===== */
.selected-feats-summary {
  margin-top: 1.5rem;
  padding: 1rem;
  background-color: #f0f4f8;
  border: 2px solid #22334a;
  border-radius: 6px;
}

.selected-feats-summary h3 {
  margin: 0 0 1rem 0;
  color: #22334a;
  font-size: 1.1rem;
  border-bottom: 2px solid #22334a;
  padding-bottom: 0.5rem;
}

.selected-feats-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.no-feats-message {
  color: #666;
  font-style: italic;
  text-align: center;
  margin: 1rem 0;
}

.feat-item {
  padding: 0.75rem;
  background-color: #fff;
  border-left: 4px solid #22334a;
  border-radius: 4px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.feat-item-name {
  font-weight: bold;
  color: #22334a;
  font-size: 1rem;
  margin-bottom: 0.25rem;
}

.feat-item-description {
  color: #555;
  font-size: 0.9rem;
  line-height: 1.4;
}

.feat-item-bonuses {
  margin-top: 0.5rem;
  padding-top: 0.5rem;
  border-top: 1px solid #e0e0e0;
  font-size: 0.85rem;
}

.feat-bonus {
  display: inline-block;
  padding: 0.2rem 0.5rem;
  margin: 0.2rem 0.3rem 0.2rem 0;
  background-color: #4caf50;
  color: #fff;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.8rem;
}

.feat-bonus.save-bonus {
  background-color: #2196f3;
}

.feat-bonus.hp-bonus {
  background-color: #f44336;
}

.feat-bonus.skill-bonus {
  background-color: #ff9800;
}

/* ===== RESPONSIVE ADJUSTMENTS ===== */
@media (max-width: 768px) {
  .session-grid {
    grid-template-columns: 1fr;
  }

  .mode-toggle {
    flex-direction: column;
  }

  .skills-controls {
    flex-direction: column;
  }

  #skillSearch {
    width: 100%;
  }
}
